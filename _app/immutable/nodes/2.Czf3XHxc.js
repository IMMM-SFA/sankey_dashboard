import{b as Ne,c as mt,d as Ye,a as w,n as _t,t as O}from"../chunks/disclose-version.D2tESqhP.js";import"../chunks/legacy.DobxsTqr.js";import{C as yt,D as Je,E as Ke,L as xt,N as Qe,a4 as ht,a8 as wt,a7 as kt,I as Ft,Y as le,X as Et,p as at,l as rt,a as it,ar as ye,b as lt,s as C,g as e,aB as _e,m as D,A as St,c as i,r as a,t as A,ac as Dt,d as u,aq as R}from"../chunks/runtime.DlkffFwX.js";import{s as J}from"../chunks/render.Bgzz3nrl.js";import{e as K,i as Q}from"../chunks/each.CQDwI71U.js";import{a as Xe,r as X,s as S}from"../chunks/attributes.DK1voP7J.js";import{e as Ut}from"../chunks/events.BRcrOaZu.js";import{P as Ze,b as Z}from"../chunks/papaparse.min.PHBgkm3Y.js";import{i as nt}from"../chunks/lifecycle.C0YD5g_r.js";import{o as st,a as zt,c as Lt}from"../chunks/index-client.RC-MTrHY.js";import{b as $t}from"../chunks/paths.D4uvyehR.js";import{i as et}from"../chunks/if.Psvj0umq.js";import{l as Ct}from"../chunks/props.Xn059cIq.js";import{c as Ot,g as tt}from"../chunks/functions.DQ1eNffz.js";function Mt(M,U,p,_,T){var L=M,c="",z;yt(()=>{if(c===(c=U()??"")){Je&&Ke();return}z!==void 0&&(Et(z),z=void 0),c!==""&&(z=xt(()=>{if(Je){Qe.data;for(var b=Ke(),P=b;b!==null&&(b.nodeType!==8||b.data!=="");)P=b,b=ht(b);if(b===null)throw wt(),kt;Ne(Qe,P),L=Ft(b);return}var W=c+"";W=`<svg>${W}</svg>`;var k=mt(W);for(k=le(k),Ne(le(k),k.lastChild);le(k);)L.before(le(k))}))})}var Pt=_t("<svg><!></svg>"),Wt=O("<span></span>");function ee(M,U){const p=Ct(U,["children","$$slots","$$events","$$legacy"]);at(U,!1);const _=D({name:"",loading:null,destroyed:!1});let T=D(!1),L=D(0),c=D();const z=x=>{typeof p.onLoad=="function"&&p.onLoad(x),Lt()("load",{icon:x})};function b(){Dt(L)}st(()=>{C(T,!0)}),zt(()=>{_e(_,e(_).destroyed=!0),e(_).loading&&(e(_).loading.abort(),_e(_,e(_).loading=null))}),rt(()=>(e(L),St(p),e(T),e(_),e(c),tt),()=>{e(L);const x=!!p.ssr||e(T),f=Ot(p.icon,e(_),x,b,z);C(c,f?tt(f.data,p):null),e(c)&&f.classes&&_e(c,e(c).attributes.class=(typeof p.class=="string"?p.class+" ":"")+f.classes.join(" "))}),it(),nt();var P=Ye(),W=ye(P);{var k=x=>{var f=Ye(),te=ye(f);{var $=F=>{var E=Pt();let y;var ae=i(E);Mt(ae,()=>e(c).body),a(E),A(()=>y=Xe(E,y,{...e(c).attributes},void 0,!0)),w(F,E)},xe=F=>{var E=Wt();let y;A(()=>y=Xe(E,y,{...e(c).attributes})),w(F,E)};et(te,F=>{e(c).svg?F($):F(xe,!1)})}w(x,f)};et(W,x=>{e(c)&&x(k)})}w(M,P),lt()}const la=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var Ht=O('<div><input type="radio" name="rcps"> <label> </label></div>'),It=O('<div><input type="radio" name="ssps"> <label> </label></div>'),Rt=O('<div><input type="radio" name="diagram"> <label> </label></div>'),At=O('<div><input type="radio" name="waterUnits"> <label> </label></div>'),Tt=O('<div><input type="radio" name="energyUnits"> <label> </label></div>'),jt=O('<div class="flex flex-row w-screen"><div id="scenarioSelectionBar" class="sticky top-0 flex h-full w-full max-w-[21rem] p-7 flex-col rounded-xl bg-white bg-clip-border text-gray-700 border-2 drop-shadow-xl"><div class="p-2 mb-2"><div class="flex items-center"><h5 class="block font-sans text-xl antialiased font-semibold leading-snug tracking-normal text-blue-gray-900">Scenario Selection</h5></div></div> <nav class="flex min-w-[240px] flex-col gap-3 mb-8 font-sans text-base font-normal text-blue-gray-700"><div role="contentinfo" class="flex items-center w-full p-3 leading-tight transition-all rounded-lg outline-none text-start hover:bg-blue-gray-50 hover:bg-opacity-80 hover:text-blue-gray-900 focus:bg-blue-gray-50 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900"><div class="grid mr-4 place-items-center"><!></div> <div class="group flex relative"><span>Fossil-fuel Emphasis</span></div></div> <div class="flex leading-normal pl-16 font-light h-6 bg-[#FFFFFF] items-center gap-8 text-[#000000]"><fieldset><div class="flex flex-row gap-5"></div></fieldset></div> <div role="contentinfo" class="flex items-center w-full p-3 leading-tight transition-all rounded-lg outline-none text-start hover:bg-blue-gray-50 hover:bg-opacity-80 hover:text-blue-gray-900 focus:bg-blue-gray-50 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900"><div class="grid mr-4 place-items-center"><!></div> <div class="group flex relative"><span>Population & Economic Growth</span></div></div> <div class="flex leading-normal pl-16 font-light h-6 bg-[#FFFFFF] items-center gap-8 text-[#000000]"><fieldset><div class="flex flex-row gap-5"></div></fieldset></div> <div class="pt-9 "><h5 class="block font-sans text-xl antialiased font-semibold tracking-normal text-blue-gray-900">Visualization Options</h5></div> <nav class="flex min-w-[240px] flex-col font-sans text-base font-normal text-blue-gray-700"><div role="contentinfo" class="flex items-center w-full p-3 leading-tight transition-all rounded-lg outline-none text-start hover:bg-blue-gray-50 hover:bg-opacity-80 hover:text-blue-gray-900 focus:bg-blue-gray-50 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900"><div class="grid mr-4 place-items-center"><!></div> <div class="group flex relative"><span>Show flows for:</span></div></div> <div class="flex leading-normal m-8 pl-7 font-light h-6 bg-[#FFFFFF] items-center gap-8 text-[#000000]"><fieldset><div class="flex flex-col  top-15 gap-2"></div></fieldset></div></nav> <nav class="flex min-w-[240px] flex-col font-sans text-base font-normal text-blue-gray-700"><div role="contentinfo" class="flex items-center w-full p-3 leading-tight transition-all rounded-lg outline-none text-start hover:bg-blue-gray-50 hover:bg-opacity-80 hover:text-blue-gray-900 focus:bg-blue-gray-50 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900"><div class="grid mr-4 place-items-center"><!></div> <div class="group flex relative"><span>Select Water Units:</span></div></div> <div class="flex leading-normal m-8 pl-7 font-light h-6 bg-[#FFFFFF] items-center gap-8 text-[#000000]"><fieldset><div class="flex flex-col top-15 gap-2"></div></fieldset></div></nav> <nav class="flex min-w-[240px] flex-col font-sans text-base font-normal text-blue-gray-700"><div role="contentinfo" class="flex items-center w-full p-3 leading-tight transition-all rounded-lg outline-none text-start hover:bg-blue-gray-50 hover:bg-opacity-80 hover:text-blue-gray-900 focus:bg-blue-gray-50 focus:bg-opacity-80 focus:text-blue-gray-900 active:bg-blue-gray-50 active:bg-opacity-80 active:text-blue-gray-900"><div class="grid mr-4 place-items-center"><!></div> <div class="group flex relative"><span>Select Energy Units:</span></div></div> <div class="flex leading-normal m-8 pl-7 font-light h-6 bg-[#FFFFFF] items-center gap-8 text-[#000000]"><fieldset><div class="flex flex-col  top-15 gap-2"></div></fieldset></div> <div class="pt-8"><button class="bg-gray-200 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center"><svg class="fill-current w-4 h-4 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"></path></svg> <span>Download Selected Data</span></button></div></nav></nav></div> <div id="sankeyWrapper" class="h-full w-full min-h-[800px] flex flex-col items-stretch flex-1 m-0 p-0"><div id="hybridSankeyDiagram" class="w-full min-h-[800px] m-0 p-0"></div></div></div>');function Bt(M,U){at(U,!1);const p=[],_=[],T=[],L=[],c=[],z={ssp3:"Low",ssp5:"High"},b={rcp45:"Low",rcp85:"High"},P={"Energy & Water":"Integrated Energy & Water",Energy:"Energy",Water:"Water"},W={km3:"Cubic Kilometers",billion_gallons:"Billion Gallons",million_acre_ft:"Million Acre-Feet"},k={EJ:"Exajoules",quads:"Quads",terawatt_hours:"Terawatt-hours"},x=["ssp3","ssp5"];let f=D(x[0]);const te=["rcp45","rcp85"];let $=D(te[0]),F=["cooler","hotter"][0];const E=["Energy & Water","Energy","Water"];let y=D(E[0]);const ae=["km3","billion_gallons","million_acre_ft"];let j=D(ae[0]);const he=["EJ","quads","terawatt_hours"];let B=D(he[0]),q=D();function ot(n,t,l,r,d,s,g){const v=[s,g],V=n.filter(o=>o.ssp===t&&o.rcp===l&&o.climate_sensitivity===r&&o.diagram===d&&v.includes(o.units)),G=[...new Set(V.map(o=>o.year))],H=new Set,I=[],re=[],N=[];V.forEach(o=>{H.add(o.source),H.add(o.target)});const m=[...H];if(d==="Energy & Water"){const o=m.indexOf("Wind");o!==-1&&(I[o]=.335,re[o]=.05)}return G.forEach(o=>{const ie=V.filter(h=>h.year===o),Y=[],Be=[],Ve=[],qe=[],Ge=[],me=Array(m.length).fill(null);ie.forEach(h=>{Y.push(m.indexOf(h.source)),Be.push(m.indexOf(h.target)),Ve.push(parseFloat(h.value)),qe.push(h.link_color),me[m.indexOf(h.source)]=h.source_color,me[m.indexOf(h.target)]=h.target_color,Ge.push(parseFloat(h.unit_value))}),N.push({name:o,data:[{type:"sankey",valueformat:".3r",orientation:"h",node:{pad:15,thickness:20,line:{color:"black",width:.5},label:m,hoverinfo:"none",color:me,x:I,y:re},link:{source:Y,target:Be,value:Ve,color:qe,customdata:Ge,hovertemplate:"Source: %{source.label}<br>Target: %{target.label}<br>Value: %{customdata}<extra></extra>"}}]})}),{frames:N,labels:m}}function dt(n,t,l,r,d,s,g){const{frames:v,labels:V}=ot(n,t,l,r,d,s,g),G=v[0],H={title:`${P[d]} Sankey Diagram for the United States`,font:{size:14},sliders:[{steps:v.map(I=>({method:"animate",label:I.name,args:[[I.name],{mode:"next",frame:{duration:2e3,redraw:!0},transition:{duration:2e3,easing:"cubic-in-out"}}]})),active:0,currentvalue:{prefix:"Year: ",font:{size:16,color:"#666"}},pad:{t:10}}],updatemenus:[{type:"buttons",showactive:!1,buttons:[{label:"Play",method:"animate",args:[null,{frame:{duration:2e3,redraw:!0},fromcurrent:!0,mode:"next",transition:{duration:1e3}}]},{label:"Pause",method:"animate",args:[[null],{mode:"immediate",frame:{duration:0,redraw:!1},transition:{duration:0}}]}],x:0,y:0,pad:{t:10,r:10}}],annotations:[{text:`${b[l]} Fossil-fuel Emphasis & ${z[t]} Population and Economic Growth Scenario`,x:.5,y:1.05,xref:"paper",yref:"paper",showarrow:!1,font:{size:16,color:"gray"},align:"center"}]};Plotly.newPlot("hybridSankeyDiagram",G.data,H).then(()=>{Plotly.addFrames("hybridSankeyDiagram",v)})}st(()=>{fetch(`${$t}/energy_water_data.csv`).then(n=>{if(!n.ok)throw new Error("Network response was not ok");return n.text()}).then(n=>Ze.parse(n,{header:!0}).data).then(n=>{C(q,n)}).catch(n=>console.error("Error loading CSV file:",n))});function ct(n,t,l,r,d,s,g){if(!n.length)return;const v=[s,g],V=n.filter(o=>o.ssp===t&&o.rcp===l&&o.climate_sensitivity===r&&o.diagram===d&&v.includes(o.units)),G=["rcp","ssp","source","target","year","unit_value","units","diagram"],H=V.map(o=>{let ie={};return G.forEach(Y=>{ie[Y]=o[Y]}),ie}),I=Ze.unparse(H),re=new Blob([I],{type:"text/csv;charset=utf-8;"}),N=URL.createObjectURL(re),m=document.createElement("a");m.setAttribute("href",N),m.setAttribute("download","sankey_data_download.csv"),document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(N)}rt(()=>(e(q),e(f),e($),e(y),e(B),e(j)),()=>{e(q)&&e(f)&&e($)&&F&&e(y)&&e(B)&&e(j)&&dt(e(q),e(f),e($),F,e(y),e(B),e(j))}),it(),nt();var ne=jt(),we=i(ne),ke=u(i(we),2),se=i(ke),Fe=i(se),vt=i(Fe);ee(vt,{icon:"tabler:building-factory",style:"font-size: 30px"}),a(Fe),R(2),a(se);var oe=u(se,2),Ee=i(oe),Se=i(Ee);K(Se,5,()=>te,Q,(n,t)=>{var l=Ht(),r=i(l);X(r);var d,s=u(r,2),g=i(s,!0);a(s),a(l),A(()=>{S(r,"id",e(t)),d!==(d=e(t))&&(r.value=(r.__value=e(t))==null?"":e(t)),S(s,"for",e(t)),J(g,b[e(t)])}),Z(p,[],r,()=>(e(t),e($)),v=>C($,v)),w(n,l)}),a(Se),a(Ee),a(oe);var de=u(oe,2),De=i(de),ut=i(De);ee(ut,{icon:"ix:user-management",style:"font-size: 30px"}),a(De),R(2),a(de);var ce=u(de,2),Ue=i(ce),ze=i(Ue);K(ze,5,()=>x,Q,(n,t)=>{var l=It(),r=i(l);X(r);var d,s=u(r,2),g=i(s,!0);a(s),a(l),A(()=>{S(r,"id",e(t)),d!==(d=e(t))&&(r.value=(r.__value=e(t))==null?"":e(t)),S(s,"for",e(t)),J(g,z[e(t)])}),Z(_,[],r,()=>(e(t),e(f)),v=>C(f,v)),w(n,l)}),a(ze),a(Ue),a(ce);var ve=u(ce,4),ue=i(ve),Le=i(ue),ft=i(Le);ee(ft,{icon:"tabler:mist",style:"font-size: 25px"}),a(Le),R(2),a(ue);var $e=u(ue,2),Ce=i($e),Oe=i(Ce);K(Oe,5,()=>E,Q,(n,t)=>{var l=Rt(),r=i(l);X(r);var d,s=u(r,2),g=i(s,!0);a(s),a(l),A(()=>{S(r,"id",e(t)),d!==(d=e(t))&&(r.value=(r.__value=e(t))==null?"":e(t)),S(s,"for",e(t)),J(g,e(t))}),Z(T,[],r,()=>(e(t),e(y)),v=>C(y,v)),w(n,l)}),a(Oe),a(Ce),a($e),a(ve);var fe=u(ve,2),ge=i(fe),Me=i(ge),gt=i(Me);ee(gt,{icon:"lets-icons:water",style:"font-size: 25px"}),a(Me),R(2),a(ge);var Pe=u(ge,2),We=i(Pe),He=i(We);K(He,5,()=>ae,Q,(n,t)=>{var l=At(),r=i(l);X(r);var d,s=u(r,2),g=i(s,!0);a(s),a(l),A(()=>{S(r,"id",e(t)),d!==(d=e(t))&&(r.value=(r.__value=e(t))==null?"":e(t)),S(s,"for",e(t)),J(g,W[e(t)])}),Z(L,[],r,()=>(e(t),e(j)),v=>C(j,v)),w(n,l)}),a(He),a(We),a(Pe),a(fe);var Ie=u(fe,2),pe=i(Ie),Re=i(pe),pt=i(Re);ee(pt,{icon:"nimbus:fire",style:"font-size: 25px"}),a(Re),R(2),a(pe);var be=u(pe,2),Ae=i(be),Te=i(Ae);K(Te,5,()=>he,Q,(n,t)=>{var l=Tt(),r=i(l);X(r);var d,s=u(r,2),g=i(s,!0);a(s),a(l),A(()=>{S(r,"id",e(t)),d!==(d=e(t))&&(r.value=(r.__value=e(t))==null?"":e(t)),S(s,"for",e(t)),J(g,k[e(t)])}),Z(c,[],r,()=>(e(t),e(B)),v=>C(B,v)),w(n,l)}),a(Te),a(Ae),a(be);var je=u(be,2),bt=i(je);a(je),a(Ie),a(ke),a(we),R(2),a(ne),Ut("click",bt,()=>ct(e(q),e(f),e($),F,e(y),e(B),e(j))),w(M,ne),lt()}var Vt=O('<div class="w-full hidden lg:block "><!></div> <div class="w-full block lg:hidden "><div id="scenarioSelectionBar" class="sticky top-0 flex h-full w-full p-7 flex-col rounded-xl bg-white bg-clip-border text-gray-700 border-2 drop-shadow-xl"><div class="p-2 mb-2"><h5 class="block font-sans text-xl antialiased font-semibold leading-snug tracking-normal text-blue-gray-900">This page is not available on small screens or mobile devices. Please use a desktop or larger screen view contents.</h5></div></div></div>',1);function na(M){var U=Vt(),p=ye(U),_=i(p);Bt(_,{}),a(p),R(2),w(M,U)}export{na as component,la as universal};
